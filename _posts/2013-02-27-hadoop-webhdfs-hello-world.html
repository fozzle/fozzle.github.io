---
layout: post
title: Hadoop WebHDFS "Hello World"
categories:
- Admin
- Hadoop
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '1'
---
<p>Spent most of the day installing VMs and Hadoop, but I got to play around a little it with Hadoop's web API. We're looking to use the Hadoop WebHDFS APIs to allow the client to push data into the Hadoop cluster. Here's some stuff you'll have to do to enable WebHDFS. This <em>assumes</em> you already have a NameNode up and running. If not, see <a title="Single Node Setup" href="http://hadoop.apache.org/docs/stable/single_node_setup.html">this document</a> for single-node setup.</p>

<p>First, you have to enable WebHDFS in the <em>conf/hdfs-site.xml </em>file in your Hadoop installation.</p>
<pre class="lang:xhtml decode:true" title="conf/hdfs-site.xml">&lt;property&gt;
  &lt;name&gt;dfs.webhdfs.enabled&lt;/name&gt;
  &lt;value&gt;true&lt;/value&gt;
&lt;/property&gt;</pre>
<p>Once you've done that, you can make requests to the NameNodes you have running.</p>

<p><a title="Hadoop WebHDFS documentation" href="http://hadoop.apache.org/docs/stable/webhdfs.html" target="_blank">The Hadoop documentation</a> is great and describes all operations you can perform and their respective endpoints and parameters. Today I just played with creating and writing to a file.</p>

<p>You first use the endpoint with the operation <strong>CREATE</strong> and you'll get a redirect. In this example, test.txt is the file, doop is the hostname, and 50070 is the port.</p>
<pre class="lang:sh decode:true">curl -i -X PUT "http://doop:50070/webhdfs/v1/test.txt?op=CREATE&amp;overwrite=true"</pre>
Returns something like this...
<pre class="lang:default decode:true">HTTP/1.1 307 TEMPORARY_REDIRECT
Content-Type: application/octet-stream
Location: http://doop:50075/webhdfs/v1/test.txt?op=CREATE&amp;overwrite=true
Content-Length: 0
Server: Jetty(6.1.26)</pre>

<p>You take the location and put it into another PUT request, this time including a file.</p>

<pre class="lang:sh decode:true">curl -i -X PUT -T test.txt "http://doop:50075/webhdfs/v1/test.txt?op=CREATE&amp;overwrite=true"</pre>

<p>If it's successful,  you should see a<strong> 201 Created</strong> response. At the moment however, I am receiving a <strong>403 Forbidden</strong>...I <em>suspect</em> this is just because on the server I do not have permission to write files on the default user. You can authenticate (described in the docs) to set your user, I may try that, or I may just choose a path that is write-able for everyone. I guess I'll find out soon enough!</p>

<p>EDIT: Sure enough, you just have to specify a user who has write access to that DFS. Since I'm just testing things out, I'm not using authentication, so I added the parameter <em>user.name=&lt;name&gt; </em>and replaced name with the user I used to create the node, and the file was created.</p>
